{% extends "base.html" %}
{% load static %}
{% block title %} @{{ profile.user.username }} | Profile {% endblock title %}

{% block content %}
<div class="container mt-5 d-flex justify-content-center">
  <div class="card p-4 shadow-sm rounded-4" style="max-width: 600px; width: 100%;">
    
    <div class="d-flex align-items-center mb-4">
      {% if  profile.avatar%}
        <img src="{{ profile.avatar.url }}" alt="avatar" class="rounded-circle me-3" style="width: 64px; height: 64px;">
      {% else %}
        <img src="{% static "DEFAULT_PROFILE_PICTURE.png" %}" alt="Avatar" class="rounded-circle me-3" style="width: 64px; height: 64px;">

      {% endif %}
      <div>
        <h4 class="mb-0">@{{ profile.user.username }}</h4>
        <small class="text-muted">{{ profile.user.email }}</small>
      </div>
    </div>

    {% comment %} <!-- دکمه فالو / آنفالو -->
    {% if request.user != profile.user %}
      <form method="POST" action="{% url 'follow_toggle' profile.user.id %}">
        {% csrf_token %}
        {% if is_following %}
          <button class="btn btn-outline-danger w-100 mb-3">Unfollow</button>
        {% else %}
          <button class="btn btn-primary w-100 mb-3">Follow</button>
        {% endif %}
      </form>
    {% endif %} {% endcomment %}

    <div class="mb-3">
      <h6 class="text-uppercase text-muted">Following</h6>
      {% for following in profile.follows.all %}
        <a href="{% url 'profile_detail' following.user.id %}" class="d-block text-decoration-none mb-1">
          @{{ following }}
        </a>
      {% empty %}
        <p class="text-muted">Not following anyone yet.</p>
      {% endfor %}
    </div>

    <div>
      <h6 class="text-uppercase text-muted">Followers</h6>
      {% for followed_by in profile.followed_by.all %}
        <a href="{% url 'profile_detail' followed_by.user.id %}" class="d-block text-decoration-none mb-1">
          @{{ followed_by }}
        </a>
      {% empty %}
        <p class="text-muted">No followers yet.</p>
      {% endfor %}
    </div>

  </div>
</div>
{% endblock content %}
